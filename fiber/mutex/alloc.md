## Аллокации

### `Suspend`

Избавьтесь от динамических аллокаций в `Suspend`.

Заворачивание лямбды в `std::function` или подобный контейнер с type erasure – тоже (потенциальная) динамическая аллокация.

### Очереди

Реализуйте очереди ожидания в примитивах синхронизации без динамических аллокаций памяти.

Такую очередь вы могли встретить в задаче [sync/queue_spinlock](/tasks/sync/queue_spinlock).

Используйте [`wheels::IntrusiveList`](https://gitlab.com/Lipovsky/wheels/-/tree/master/wheels/intrusive/list.hpp) в решении со спинлоками или "голый" интрузивный список в лок-фри реализации.

### Планировщик

Реализуйте интрузивные задачи (см. [sched/intrusive](/tasks/sched/intrusive)).

### Итого

**Единственными** динамическими аллокациями в рантайме файберов будут аллокации самого объекта `Fiber`.

И даже их мы однажды научимся оптимизировать.
